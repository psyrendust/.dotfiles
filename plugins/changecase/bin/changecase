#!/usr/bin/env node
import meow from 'meow';
import * as changeCase from 'change-case';

const meowCli = meow(
  `
  Usage
    $ changecase [option] [input]

  Options
    camelCase       Transform into a string with the separator denoted by the next word capitalized
    capitalCase     Transform into a space separated string with each word capitalized
    constantCase    Transform into upper case string with an underscore between words
    dotCase         Transform into a lower case string with a period between words
    kebabCase       Transform into a lower cased string with dashes between words
    noCase          Transform into a lower cased string with spaces between words
    pascalCase      Transform into a string of capitalized words without separators
    pascalSnakeCase Transform into a string of capitalized words with underscores between words
    pathCase        Transform into a lower case string with slashes between words
    sentenceCase    Transform into a lower case with spaces between words then capitalize the string
    snakeCase       Transform into a lower case string with underscores between words
    trainCase       Transform into a string with random capitalization applied

  Examples
    $ changecase snake_case_string
    snakeCaseString
`,
  {
    argv: process.argv.slice(2),
    importMeta: import.meta,
    flags: {
      help: { type: 'boolean', shortFlag: 'h' },
      version: { type: 'boolean', shortFlag: 'v' },
    },
  }
);

const options = new Set([
  'camelCase',
  'capitalCase',
  'constantCase',
  'dotCase',
  'kebabCase',
  'noCase',
  'pascalCase',
  'pascalSnakeCase',
  'pathCase',
  'sentenceCase',
  'snakeCase',
  'trainCase',
]);

const [arg1, arg2] = meowCli.input;
let option = 'camelCase';
let input = '';

if (arg2 != null && options.has(arg1)) {
  option = arg1;
  input = arg2;
} else {
  input = arg1;
}

if (input.length > 0) {
  console.log(changeCase[option](input));
}
